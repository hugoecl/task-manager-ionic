/**
 * Task Manager - Estilos Globais
 * ============================================================================
 * Estilos que se aplicam a toda a aplicação
 */

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/* Dark mode desativado para tema claro
@import "@ionic/angular/css/palettes/dark.system.css";
*/

/** ==================== TIPOGRAFIA ==================== **/

/* Fonte personalizada - Inter */
html, body, * {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

/* Fonte customizada para títulos */
h1, h2, h3, h4, h5, h6,
ion-title,
ion-card-title {
  font-weight: 700;
  color: var(--ion-text-color);
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
}

/* Texto secundário */
p, ion-note {
  color: var(--ion-color-medium);
  line-height: 1.6;
}

/** ==================== COMPONENTES GLOBAIS ==================== **/

/* Header com gradiente */
.header-gradient {
  background: var(--app-gradient-primary);
  padding: 24px 16px;
  color: #ffffff;
  
  h1, h2, h3, p {
    color: #ffffff;
    margin: 0;
  }
  
  h1, h2 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  
  p {
    font-size: 14px;
    opacity: 0.9;
  }
}

/* Cartão moderno */
.modern-card {
  background: var(--ion-card-background);
  border-radius: var(--app-radius-lg);
  box-shadow: var(--app-shadow);
  padding: 16px;
  margin: 16px;
}

/* Estado vazio padrão */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 48px 24px;
  text-align: center;
  min-height: 50vh;
  
  ion-icon {
    font-size: 80px;
    color: var(--ion-color-medium);
    margin-bottom: 24px;
    opacity: 0.5;
  }
  
  h2, h3 {
    font-size: 20px;
    font-weight: 600;
    margin: 0 0 8px 0;
    color: var(--ion-text-color);
  }
  
  p {
    font-size: 14px;
    color: var(--ion-color-medium);
    margin: 0 0 24px 0;
    max-width: 280px;
  }
  
  ion-button {
    --border-radius: var(--app-radius-xl);
    --padding-start: 24px;
    --padding-end: 24px;
  }
}

/* Lista moderna */
.modern-list {
  background: transparent;
  padding: 8px 16px;
  
  ion-item {
    --background: var(--ion-card-background);
    --border-radius: var(--app-radius);
    --padding-start: 16px;
    --padding-end: 16px;
    --inner-padding-end: 0;
    margin-bottom: 8px;
    box-shadow: var(--app-shadow-sm);
    
    &::part(native) {
      border-radius: var(--app-radius);
    }
    
    h2 {
      font-weight: 600;
      font-size: 16px;
      margin-bottom: 4px;
    }
    
    p {
      font-size: 13px;
      color: var(--ion-color-medium);
      margin: 0;
    }
  }
}

/* Stats Grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
  padding: 16px;
}

.stat-card {
  background: var(--ion-card-background);
  border-radius: var(--app-radius-lg);
  padding: 16px;
  box-shadow: var(--app-shadow);
  display: flex;
  align-items: center;
  gap: 12px;
  
  .stat-icon {
    width: 48px;
    height: 48px;
    border-radius: var(--app-radius);
    display: flex;
    align-items: center;
    justify-content: center;
    
    ion-icon {
      font-size: 24px;
      color: #ffffff;
    }
    
    &.primary {
      background: var(--app-gradient-primary);
    }
    
    &.secondary {
      background: var(--app-gradient-secondary);
    }
    
    &.success {
      background: var(--app-gradient-success);
    }
    
    &.warning {
      background: var(--app-gradient-warning);
    }
    
    &.danger {
      background: var(--app-gradient-danger);
    }
  }
  
  .stat-info {
    flex: 1;
    
    .stat-value {
      font-size: 24px;
      font-weight: 700;
      display: block;
      color: var(--ion-text-color);
    }
    
    .stat-label {
      font-size: 12px;
      color: var(--ion-color-medium);
    }
  }
}

/* Barra de progresso estilizada */
.progress-section {
  padding: 16px;
  
  .progress-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    
    span {
      font-size: 14px;
      color: var(--ion-color-medium);
    }
    
    .progress-percent {
      font-weight: 700;
      color: var(--ion-color-primary);
    }
  }
  
  .progress-bar {
    height: 10px;
    background: var(--ion-color-light);
    border-radius: var(--app-radius-sm);
    overflow: hidden;
    
    .progress-fill {
      height: 100%;
      background: var(--app-gradient-primary);
      border-radius: var(--app-radius-sm);
      transition: width 0.5s ease;
    }
  }
}

/* Secção com header */
.section {
  margin-bottom: 24px;
  
  .section-header {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 0 16px;
    margin-bottom: 12px;
    
    ion-icon {
      font-size: 20px;
      color: var(--ion-color-primary);
    }
    
    h2 {
      font-size: 16px;
      font-weight: 600;
      margin: 0;
      flex: 1;
    }
    
    &.danger {
      ion-icon, h2 {
        color: var(--ion-color-danger);
      }
    }
    
    &.success {
      ion-icon, h2 {
        color: var(--ion-color-success);
      }
    }
  }
}

/* Task item overdue */
.task-item.overdue:not(.completed) {
  --background: rgba(var(--ion-color-danger-rgb), 0.08);
  border-left: 4px solid var(--ion-color-danger);
}

/* Task item completed */
.task-item.completed {
  opacity: 0.6;
  
  h2, h3 {
    text-decoration: line-through;
    color: var(--ion-color-medium);
  }
}

/* Badges de prioridade */
.priority-high {
  --background: var(--ion-color-danger);
}

.priority-medium {
  --background: var(--ion-color-warning);
}

.priority-low {
  --background: var(--ion-color-success);
}

/* Animações */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out;
}

.animate-slide-in {
  animation: slideInUp 0.4s ease-out;
}

/* Tab Bar customizado - Sem sombra */
ion-tab-bar {
  --background: #1A202C;
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: none;
  height: 62px;
  padding: 0;
  padding-bottom: 6px;
  display: flex;
  align-items: center;
  width: 100%;
  
  ion-tab-button {
    --color: #CBD5E0;
    --color-selected: #E68A2E;
    flex: 1 1 0; /* Cada botão ocupa espaço igual - distribuição perfeita */
    width: 0; /* Necessário para flex 1 1 0 funcionar corretamente */
    min-width: 0;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    
    ion-icon {
      font-size: 24px;
      margin: 0;
      margin-bottom: 2px;
      width: 24px;
      height: 24px;
      flex-shrink: 0;
    }
    
    ion-label {
      font-size: 11px;
      font-weight: 600;
      margin: 0;
      margin-top: 2px;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
      flex-shrink: 0;
    }
  }
}

/* Toolbar customizado */
ion-toolbar {
  --min-height: 56px;
}

/* FAB customizado - Sem sombra */
ion-fab-button {
  --background: #D4740F;
  --background-activated: #bc660d;
  --color: #ffffff;
  --box-shadow: none;
  
  ion-icon {
    font-size: 24px;
  }
}

/* Segmentos */
ion-segment {
  --background: #4A5568;
  border-radius: var(--app-radius);
  padding: 4px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  
  ion-segment-button {
    --background-checked: #D4740F;
    --color: #CBD5E0;
    --color-checked: #ffffff;
    --indicator-color: transparent;
    --border-radius: 10px;
    min-height: 36px;
    font-weight: 500;
    font-size: 13px;
  }
}

/* Chips */
ion-chip {
  --background: var(--ion-color-light);
  font-weight: 500;
  
  &.chip-outline {
    --background: transparent;
    border: 2px solid var(--ion-color-primary);
  }
}

/* Accordion */
ion-accordion {
  margin-bottom: 8px;
  
  ion-item[slot="header"] {
    --background: var(--ion-card-background);
    --border-radius: var(--app-radius);
    box-shadow: var(--app-shadow-sm);
    
    .ion-accordion-toggle-icon {
      color: var(--ion-color-primary);
    }
  }
  
  .ion-padding[slot="content"] {
    background: var(--ion-background-color);
    padding: 16px;
    line-height: 1.6;
  }
}

/* Datetime */
ion-datetime {
  --background: var(--ion-card-background);
  border-radius: var(--app-radius-lg);
  
  &::part(calendar-day today) {
    border: 2px solid var(--ion-color-primary);
    border-radius: 50%;
  }
  
  &::part(calendar-day active) {
    background: var(--ion-color-primary);
    color: #ffffff;
  }
}

/* Alertas - Estilos melhorados no variables.scss */

/* CSS específico para garantir visibilidade dos labels dos radio buttons */
ion-alert {
  /* Garantir que todos os labels sejam visíveis */
  .alert-radio-label,
  label.alert-radio-label,
  .alert-radio label,
  .alert-radio-wrapper label,
  .alert-radio-group label,
  .alert-radio-item label {
    display: inline-block !important;
    visibility: visible !important;
    opacity: 1 !important;
    color: #F7FAFC !important;
    font-size: 15px !important;
    font-weight: 500 !important;
    padding: 0 !important;
    margin: 0 0 0 14px !important;
    width: auto !important;
    max-width: 100% !important;
  }
  
  /* Forçar visibilidade do texto dentro dos labels */
  .alert-radio-label::before {
    content: none !important;
    display: none !important;
  }
  
  /* Garantir que o texto dos labels seja visível usando todos os seletores possíveis */
  .alert-radio-label *,
  .alert-radio-label::text,
  .alert-radio-label::first-line {
    color: #F7FAFC !important;
    opacity: 1 !important;
    visibility: visible !important;
    display: inline !important;
  }
  
  /* Remover qualquer estilo que possa esconder o label */
  .alert-radio-wrapper {
    label,
    .alert-radio-label {
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
  }
}

/* Action Sheet - Estilos globais que funcionam através do shadow DOM */
ion-action-sheet {
  --background: #3D4A5C;
  --color: #F7FAFC;
  --button-color: #F7FAFC;
}

/* Estilos específicos usando seletores globais que penetram no shadow DOM */
.action-sheet-container {
  background: #3D4A5C !important;
  border-radius: 16px 16px 0 0 !important;
  border-top: 3px solid #E68A2E !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-bottom: none !important;
  box-shadow: none !important;
}

.action-sheet-title {
  color: #F7FAFC !important;
  font-weight: 700 !important;
  font-size: 18px !important;
  padding: 20px 20px 12px !important;
  background: transparent !important;
}

.action-sheet-sub-title {
  color: #A0AEC0 !important;
  font-size: 14px !important;
  padding: 0 20px 16px !important;
  font-weight: 400 !important;
  line-height: 1.5 !important;
}

.action-sheet-button {
  color: #F7FAFC !important;
  font-weight: 600 !important;
  font-size: 15px !important;
  padding: 16px 20px !important;
  min-height: 56px !important;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08) !important;
  background: transparent !important;
  border-left: 3px solid transparent !important;
  transition: all 0.2s ease !important;
  margin: 0 12px 6px !important;
  border-radius: 12px !important;
  text-align: left !important;
  white-space: normal !important;
  line-height: 1.5 !important;
}

.action-sheet-button:hover {
  background: rgba(255, 255, 255, 0.05) !important;
  border-left-color: #E68A2E !important;
}

.action-sheet-button:active {
  background: rgba(255, 255, 255, 0.08) !important;
  border-left-color: #D4740F !important;
  transform: scale(0.98) !important;
}

.action-sheet-button.action-sheet-cancel {
  background: #4A5568 !important;
  color: #CBD5E0 !important;
  font-weight: 600 !important;
  margin: 16px 12px 12px !important;
  border-top: 1px solid rgba(255, 255, 255, 0.1) !important;
  border-radius: 12px !important;
  border-left: none !important;
  padding: 16px 20px !important;
  font-size: 15px !important;
  box-shadow: none !important;
  text-align: center !important;
}

.action-sheet-button.action-sheet-cancel:hover {
  background: #5A6575 !important;
}

.action-sheet-button.action-sheet-cancel:active {
  background: #4A5568 !important;
  transform: scale(0.98) !important;
}

/* Loading */
ion-loading {
  .loading-wrapper {
    border-radius: var(--app-radius-lg);
  }
}

/* Side Menu - Tema Laranja Suave */
ion-menu {
  --background: #2D3748;
  
  ion-toolbar {
    --background: linear-gradient(135deg, #D4740F 0%, #E68A2E 100%);
    --color: #ffffff;
  }
  
  ion-title {
    font-weight: 700;
    letter-spacing: 1px;
  }
  
  ion-content {
    --background: #2D3748;
  }
  
  ion-list {
    background: transparent;
    padding: 16px 0;
  }
  
  ion-item {
    --background: transparent;
    --color: #F7FAFC;
    --padding-start: 20px;
    --padding-end: 20px;
    --min-height: 56px;
    margin: 4px 12px;
    border-radius: 12px;
    font-weight: 500;
    letter-spacing: 0.5px;
    
    ion-icon {
      color: #E68A2E;
      font-size: 22px;
    }
  }
}

/* Menu Button - Laranja Suave */
ion-menu-button {
  --color: #E68A2E;
  font-size: 24px;
}

/* Toast */
ion-toast {
  --border-radius: var(--app-radius);
  --box-shadow: var(--app-shadow-lg);
  
  &::part(message) {
    font-weight: 500;
  }
}

/** ==================== RESPONSIVIDADE MOBILE ==================== **/

/* Garantir que o body e html ocupem 100% da tela */
html, body {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* App root deve ocupar toda a tela */
app-root {
  display: block;
  width: 100%;
  height: 100%;
}

/* Ion app deve ocupar toda a tela */
ion-app {
  width: 100%;
  height: 100%;
  max-width: 100vw;
  overflow-x: hidden;
}

/* Ion content deve respeitar os limites da tela */
ion-content {
  width: 100%;
  max-width: 100vw;
  overflow-x: hidden;
  --overflow: hidden;
}

/* Prevenir overflow horizontal em todos os elementos */
* {
  max-width: 100%;
  box-sizing: border-box;
}

/* Media queries para diferentes tamanhos de tela */
@media screen and (max-width: 480px) {
  /* Telas pequenas (até 480px) */
  .calendar-wrapper {
    margin: 0 12px !important;
  }
  
  .day-section {
    padding: 16px 12px !important;
  }
  
  .legend {
    padding: 10px 12px !important;
    gap: 16px !important;
    flex-wrap: wrap;
  }
}

@media screen and (min-width: 481px) and (max-width: 768px) {
  /* Telas médias (481px - 768px) */
  .calendar-wrapper {
    margin: 0 16px !important;
  }
}

@media screen and (min-width: 769px) {
  /* Telas grandes (769px+) - limitar largura máxima */
  .calendar-wrapper {
    max-width: 600px;
    margin: 0 auto !important;
  }
  
  .day-section {
    max-width: 600px;
    margin: 0 auto;
  }
}

/* Ajustes específicos para alta densidade de pixels (Samsung S21+) */
@media screen and (-webkit-min-device-pixel-ratio: 3),
       screen and (min-resolution: 3dppx) {
  /* Ajustes para telas de alta densidade */
  ion-datetime {
    font-size: 16px;
  }
  
  .legend-item {
    font-size: 13px;
  }
  
  .day-header h2 {
    font-size: 18px;
  }
}

/* Prevenir zoom em inputs no iOS */
input, textarea, select {
  font-size: 16px !important;
}

@media screen and (max-width: 480px) {
  input, textarea, select {
    font-size: 16px !important;
  }
}

/** ==================== UTILITÁRIOS ==================== **/

/* Texto truncado */
.text-truncate {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Flex utilities */
.d-flex {
  display: flex;
}

.align-center {
  align-items: center;
}

.justify-between {
  justify-content: space-between;
}

.gap-8 {
  gap: 8px;
}

.gap-16 {
  gap: 16px;
}

/* Margens */
.mt-8 {
  margin-top: 8px;
}

.mt-16 {
  margin-top: 16px;
}

.mb-8 {
  margin-bottom: 8px;
}

.mb-16 {
  margin-bottom: 16px;
}
